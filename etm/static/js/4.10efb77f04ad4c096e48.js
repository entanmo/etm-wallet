webpackJsonp([4],{"0I8t":function(e,t){},"9bBU":function(e,t,s){s("mClu");var i=s("FeBl").Object;e.exports=function(e,t,s){return i.defineProperty(e,t,s)}},C4MV:function(e,t,s){e.exports={default:s("9bBU"),__esModule:!0}},bOdI:function(e,t,s){"use strict";t.__esModule=!0;var i,n=s("C4MV"),a=(i=n)&&i.__esModule?i:{default:i};t.default=function(e,t,s){return t in e?(0,a.default)(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},mClu:function(e,t,s){var i=s("kM2E");i(i.S+i.F*!s("+E39"),"Object",{defineProperty:s("evD5").f})},"sL+6":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),n=s.n(i),a=s("//Fk"),o=s.n(a),r=s("bOdI"),c=s.n(r),l=s("av1y"),u=s("DfFo"),d=s("LHK4"),h=s("4lny"),v={components:{NoData:l.a,Page:d.a,SSecret:u.a},data:function(){var e;return e={totalMinersNum:0,secondSecret:"",tableData:[],minerDetail:null,showPop:!1,submitDel:!1,delType:"",delMinerNo:[]},c()(e,"secondSecret",""),c()(e,"showSecondSecretPop",!1),c()(e,"mapColor",""),c()(e,"PageTotal",1),c()(e,"ONE_PAGE_NUM",10),e},computed:{yesOrNo:function(){return"成功"===this.delType?"success-tip":"fail-tip"}},updated:function(){var e=this;Bus.$on("hideQrcode",function(t){e.showPop=!1})},created:function(){this.getSelectedMinersNum(),this.getSelectedMiners(0)},methods:{mapStatus:function(e){switch(e){case"RUN":return"正式";case"WAIT":return"备选";case"IDLE":return"剩余"}},getSelectedMinersNum:function(){var e=this;this.$http.get(h+"/api/miner/vote",{params:{secret:localStorage.getItem("etmsecret")||sessionStorage.getItem("etmsecret")}}).then(function(t){t.data.success&&(e.totalMinersNum=t.data.miners.length,e.PageTotal=Math.ceil(t.data.totalCount/e.ONE_PAGE_NUM))})},getSelectedMiners:function(e){var t=this;this.checkSecondSecret_delParams(),this.$http.get(h+"/api/miner/vote",{params:{secret:localStorage.getItem("etmsecret")||sessionStorage.getItem("etmsecret"),offset:this.ONE_PAGE_NUM*e,limit:this.ONE_PAGE_NUM}}).then(function(e){e.data.success&&(t.tableData=e.data.miners)}).catch(function(e){console.log(e)})},checkSecondSecret_delParams:function(){this.$store.state.needsSecondSecret||this.$http.interceptors.request.use(function(e){return e.params&&delete e.params.secondSecret,e},function(e){return o.a.reject(error)})},checkSecondSecret_delData:function(){this.$store.state.needsSecondSecret||this.$http.interceptors.request.use(function(e){return delete e.data.secondSecret,e},function(e){return o.a.reject(error)})},calcTime:function(e){var t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60);return 0===t?s+"min":t+"h "+s+"min"},goToDetail:function(e){this.$router.push({path:"/selected-miners/"+e.minerNo}),sessionStorage.setItem("detailInfo",n()(e))},setMinerDetail:function(e){this.minerDetail=e},addNewMiner:function(){this.$router.push({path:"/select-miners"})},hidePopout:function(){this.showPop=!1,Bus.$emit("showMask",!1)},deleteIt:function(e){this.showPop=!0,Bus.$emit("showMask",!0),this.delMinerNo.push({minerNo:e.minerNo})},submitDelete:function(){this.showPop=!1,Bus.$emit("showMask",!1),this.$store.state.needsSecondSecret?this.showSecondSecretPop=!0:this._submitDelete()},_submitDelete:function(){var e=this;this.checkSecondSecret_delData(),this.$http.put(h+"/api/miner/del",{secret:localStorage.getItem("etmsecret")||sessionStorage.getItem("etmsecret"),secondSecret:this.secondSecret,miners:this.delMinerNo}).then(function(t){console.log(t),Bus.$emit("showMask",!1),e.showPop=!1,t.data.success?(e.delType="成功",e.submitDel=!0,setTimeout(function(){e.submitDel=!1},2e3),window.location.reload()):(e.delType="失败",e.submitDel=!0,setTimeout(function(){e.submitDel=!1},2e3))})},hidePop:function(e){this.showSecondSecretPop=e},inputSSecret:function(e){this.secondSecret=e,this._submitDelete()},renderDiff:function(e){this.getSelectedMiners(e)}},watch:{$route:function(e){this.minerDetail=this.$route.params.id,sessionStorage.setItem("minerDetail",this.minerDetail)}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:void 0==e.minerDetail,expression:"minerDetail == undefined"}],staticClass:"w"},[s("div",{staticClass:"head flex"},[s("p",[e._v("共"+e._s(e.totalMinersNum)+"台")]),e._v(" "),s("button",{on:{click:e.addNewMiner}},[e._v("添加新矿工")])]),e._v(" "),s("div",{staticClass:"event"},[s("table",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length,expression:"tableData.length"}],attrs:{width:"100%",border:"0",cellspacing:"0",cellpresumeing:"0"}},[e._m(0),e._v(" "),s("tbody",{staticClass:"table_tb"},e._l(e.tableData,function(t,i){return s("tr",{key:i},[s("td",{class:"RUN"===t.status?"run":"WAIT"===t.status?"wait":"idle"},[e._v(e._s(e.mapStatus(t.status)))]),e._v(" "),s("td",{staticClass:"gre",on:{click:function(s){e.goToDetail(t)}}},[e._v(e._s(t.minerName))]),e._v(" "),s("td",[e._v(e._s(t.vote))]),e._v(" "),s("td",[e._v(e._s(t.cheat))]),e._v(" "),s("td",[e._v(e._s((100*t.productivity).toFixed(2))+"%")]),e._v(" "),s("td",[e._v(e._s(t.averagepower.toFixed(2))+" MH/s")]),e._v(" "),s("td",[e._v(e._s(e.calcTime(t.alreadyruntime)))]),e._v(" "),s("td",{staticClass:"del",on:{click:function(s){e.deleteIt(t)}}},[e._v("删除")])])}))]),e._v(" "),s("no-data",{directives:[{name:"show",rawName:"v-show",value:!e.tableData.length,expression:"!tableData.length"}]})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showPop,expression:"showPop"}],staticClass:"popout"},[s("div",{staticClass:"close"},[s("span",{on:{click:e.hidePopout}},[e._v("×")])]),e._v(" "),s("p",{staticClass:"title"},[e._v("您确定要删除该矿工吗？")]),e._v(" "),s("div",{staticClass:"set-btm"},[s("div",{staticClass:"confirm"},[s("button",{on:{click:e.hidePopout}},[e._v("取消")]),e._v(" "),s("button",{on:{click:e.submitDelete}},[e._v("确定")])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.submitDel,expression:"submitDel"}],staticClass:"tip",class:e.yesOrNo},[e._v("\r\n\t\t  删除"+e._s(e.delType)+"！\r\n\t  ")]),e._v(" "),s("s-secret",{directives:[{name:"show",rawName:"v-show",value:e.showSecondSecretPop,expression:"showSecondSecretPop"}],on:{hidePop:e.hidePop,inputSSecret:e.inputSSecret}}),e._v(" "),s("page",{directives:[{name:"show",rawName:"v-show",value:e.PageTotal>1,expression:"PageTotal > 1"}],attrs:{PageTotal:e.PageTotal},on:{renderDiff:e.renderDiff}})],1),e._v(" "),s("router-view",{on:{setMinerDetail:e.setMinerDetail}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",{staticClass:"table_th"},[s("th",[e._v("状态")]),e._v(" "),s("th",[e._v("名称")]),e._v(" "),s("th",[e._v("得票数")]),e._v(" "),s("th",[e._v("欺诈次数")]),e._v(" "),s("th",[e._v("生产率")]),e._v(" "),s("th",[e._v("平均算力")]),e._v(" "),s("th",[e._v("已运行时间")]),e._v(" "),s("th",[e._v("操作")])])}]};var _=s("VU/8")(v,m,!1,function(e){s("0I8t")},"data-v-047f4cd7",null);t.default=_.exports}});
//# sourceMappingURL=4.10efb77f04ad4c096e48.js.map